;$(function(){$(".timestamp").each(function(){$(this).html((new Date(parseInt($(this).text())*1000)));});$("#check-node").submit(function(event){event.preventDefault();var address=$(this).find("input[name='address']").val();if(address.length==0){return false;}
$(this).find("button[type='submit']").attr("disabled","disabled");var context={csrfmiddlewaretoken:$(this).find("input[name='csrfmiddlewaretoken']").val(),address:address,port:$(this).find("input[name='port']").val()};$("#check-node-status").show();$("#check-node-status").removeClass("alert-success").removeClass("alert-danger");$("#check-node-status").empty().append("<i class='fa fa-spinner fa-3x fa-spin'></i>");var jqxhr=$.post("/api/v1/checknode/",context,function(data){$("#check-node-status").addClass("alert-success");$("#check-node-status").empty().append('<i class="fa fa-check-circle"></i>&nbsp;<a href="/nodes/'+data['address']+"-"+data['port']+'/" title="Node status">'+((data['address'].indexOf(':')>-1)?'['+data['address']+']':data['address'])+":"+data['port']+" "+data['user_agent']+"</a>");}).fail(function(){$("#check-node-status").addClass("alert-danger");if(jqxhr.status!=400&&jqxhr.status!=429){$("#check-node-status").empty().append('<i class="fa fa-exclamation-circle"></i>&nbsp;HTTP'+jqxhr.status);}else{$("#check-node-status").empty().append('<i class="fa fa-exclamation-circle"></i>&nbsp;'+jqxhr.responseJSON['detail']);}}).always(function(){$("#check-node").find("button[type='submit']").removeAttr("disabled");});});});$(window).load(function(){$(".overlay").fadeOut();});